<div class="modal bounceIn animated" id="settings1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" style="width:90%">
        <div class="modal-content" style="background: #f3f3f3;">
            <div class="modal-body">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <div class="modal-body popupscroll mCustomScrollbar">
                    <div class="mail-box">
                        <aside class="sm-side border-grey" style="background:#fff">
                            <div class="user-head">
                                <div class="user-name">
                                    <h3><a href="#" style="color: #fff;cursor: text;"><i class="fa fa-cog" aria-hidden="true"></i> SETTINGS</a></h3>
                                </div>
                            </div>
                            <ul class="inbox-nav inbox-divider nav nav-pills nav-stacked" style="border-bottom: 0">
                                <li class="active">
                                    <a href="#candidatemailtemp" ng-click="vm.fetchTemplates('candidate')" data-toggle="tab"><i class="fa fa-file-pdf-o" aria-hidden="true"></i> Candidate Mail Templates</a>
                                </li>
                                <li onclick="loadclientParent()">
                                    <a href="#clientmailtemp" ng-click="vm.fetchTemplates('client')" data-toggle="tab"><i class="fa fa-envelope-o"></i> Client Mail Templates </a>
                                </li>
                                <li>
                                    <a href="#edittracker" data-toggle="tab"><i class=" fa fa fa-pencil-square-o"></i> Edit Tracker</a>
                                </li>
                                <li ng-click="vm.fetchUsers()">
                                    <a href="#editteam" data-toggle="tab"><i class=" fa fa-users"></i> Edit Team</a>
                                </li>
                                <li ng-click="vm.fetchJobDetails()">
                                    <a href="#editclientinfo" data-toggle="tab"><i class="fa fa-list-alt" aria-hidden="true"></i> Edit Client Info</a>
                                </li>
                            </ul>
                        </aside>
                        <aside class="lg-side" style="background: rgba(255, 255, 255, 0);">
                            <div class="inbox-body" style="padding: 0px 0px;">
                                <div class="tab-content noleftpadding norightpadding">
                                    <div class="tab-pane active notoppad noleftpadding norightpadding no-background" id="candidatemailtemp" ng-init="vm.candidateTemplate={}">
                                        <div class="inbox-head mb15">
                                            <h3 style="float: left">Candidate Mail Templates</h3>
                                            <ol class="dark breadcrumb breadcrumb-quirk font-helvetica" style="float: left;margin-bottom: 8px;margin-top: 8px;margin-left: 17px;">
                                                <li class="whitetext">{{vm.selectedJobDetail.clientName}}</li>
                                                <li class="whitetext">{{vm.selectedJobDetail.designation}}</li>
                                                <li class="whitetext"><span ng-repeat="elem in vm.selectedJobDetail.locations"><span ng-if="$index != 0">,&nbsp;</span>{{elem}}</span>
                                                </li>
                                                <li class="whitetext"> {{vm.selectedJobDetail.minExp}}-{{vm.selectedJobDetail.maxExp}} Years </li>
                                            </ol>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="border-grey pad5 list-view1 mCustomScrollbar white-background">
                                                <button class="expander btn btn-success btn-xs btn-quirk" onclick="loadpage('new_format');">
                                                    <i class="fa fa-plus-square" aria-hidden="true"></i> Add new format
                                                </button>
                                                <div class="list" ng-repeat="template in vm.templates" ng-click="vm.candidateTemplate = template">
                                                    <h4><span>{{template.templateName}}</span> | <span>{{template.clientName}}</span></h4>
                                                    <div class="clear"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-8 noleftpadding">
                                            <div class="border-grey pad5 white-background">
                                                <div id="TableData" class="col-sm-12" style="display: none">
                                                    <div class="form-group mb5 col-md-6 noleftpadding">
                                                        <select id="select33" class="form-control" ng-model="vm.candidateTemplate.templateName" style="width: 100%" data-placeholder="Format Type">
                                                            <option value="" disabled></option>
                                                            <option value="Joining">Joining</option>
                                                            <option value="Offer">Offer</option>
                                                            <option value="Rejected">Rejected</option>
                                                            <option value="Interview">Interview</option>
                                                        </select>
                                                    </div>
                                                    <div class="form-group mb5 col-md-6 norightpadding">
                                                        <select id="select34" class="form-control" ng-model="vm.candidateTemplate.client" style="width: 100%" data-placeholder="Company ">
                                                            <option ng-repeat="company in vm.clientList | orderBy: company.clientName" value="{{company}}">{{company.clientName}}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="clear"></div>
                                                <div class="pad5">
                                                    <!-- <span class="text-left">Note: To auto insert name of candidates, please use <name> </span> -->
                                                    <span class="pull-right">
                                                        <!-- <button class="btn btn-success btn-xs" id="enableTextTemplate" name="enableText" ng-click="saveJobFormat()">
                                                            <i class="fa fa-plus-square" aria-hidden="true"></i>
                                                        </button> -->
                                                         <button ng-click="vm.saveCandidateTemplate($event)" class="btn btn-success btn-xs" name="enableText" id="enabltEditTemplate" onclick="toggleTextEdit()">
                                                            <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                                        </button>

                                                       
                                                    </span>
                                                    <div class="clear"></div>
                                                    <textarea ng-model="vm.candidateTemplate.templateText" rows="12" name="myTextBox" id="txtBox" disabled class="form-control mt10 ipText" placeholder="Type your comment..." required="" aria-required="true"></textarea>
                                                </div>
                                                <div class="clear"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane notoppad noleftpadding norightpadding no-background" id="clientmailtemp" ng-init="vm.clientTemplate={}">
                                        <div class="inbox-head mb15">
                                            <h3 style="float: left"> Client Mail Templates</h3>
                                            <ol class="dark breadcrumb breadcrumb-quirk font-helvetica" style="float: left;margin-bottom: 8px;margin-top: 8px;margin-left: 17px;">
                                                <li class="whitetext">{{vm.selectedJobDetail.clientName}}</li>
                                                <li class="whitetext">{{vm.selectedJobDetail.designation}}</li>
                                                <li>
                                                    <span ng-repeat="elem in vm.selectedJobDetail.locations"><span ng-if="$index != 0">,&nbsp;</span>{{elem}}</span>
                                                </li>
                                                <li> {{vm.selectedJobDetail.minExp}}-{{vm.selectedJobDetail.maxExp}} Years </li>
                                            </ol>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="border-grey pad5 list-view1 white-background">
                                                <button class="expanderclient btn btn-success btn-xs btn-quirk"">
                                                    <i class="fa fa-plus-square" aria-hidden="true"></i> Add new format
                                                </button>
                                                <div class="list" ng-repeat="template in vm.templates" ng-click="vm.clientTemplate = template">
                                                    <h4><span>{{template.templateName}}</span> | <span>{{template.clientName}}</span></h4>
                                                    <div class="clear"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-8 noleftpadding">
                                            <div class="border-grey pad5 white-background">
                                                <div id="headdiv1" class="text-center new-title">
                                                </div>
                                                <div id="TableData1" class="col-sm-12" style="display: none;">
                                                    <div class="form-group col-md-6 mb5">
                                                        <input type="text" ng-model="vm.clientTemplate.templateName" placeholder="Enter Template Name" class="form-control">
                                                    </div>
                                                    <div class="form-group col-md-6 mb5">
                                                        <select id="select34" class="form-control" ng-model="vm.clientTemplate.client" style="width: 100%" data-placeholder="Choose Client Name">
                                                            <option ng-repeat="client in vm.clientList | orderBy: client.clientName" value="{{client}}">{{client.clientName}}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="clear"></div>
                                                <div class="pad5">
                                                    <!-- <span class="text-left">Note: To auto insert name of candidates, please use <name> </span> -->
                                                    <span class="pull-right">
<!--                                                         <button ng-click="saveJobFormat()" class="btn btn-success btn-xs" name="enableTxtClient" id="enableTxtClient">
                                                            <i class="fa fa-plus-square" aria-hidden="true"></i>
                                                        </button>
 -->
                                                        <button class="btn btn-success btn-xs" ng-click="vm.saveClientTemplate($event)" name="enableEditclient"  id="enableEditclient" onclick="toggleTextClient1()">
                                                            <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                                        </button>
                                                    </span>
                                                    <div class="clear"></div>
                                                    <textarea rows="12" name="myTextBoxClient" ng-model="vm.clientTemplate.templateText" id="txtEditClient1" disabled class="form-control mt10 ipText" placeholder="Type your comment..." required="" aria-required="true"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="clear"></div>
                                    </div>
                                    <div class="tab-pane notoppad noleftpadding norightpadding no-background" id="edittracker">
                                        <div class="inbox-head mb15">
                                            <h3 style="float: left">Edit Tracker </h3>
                                            <ol class="dark breadcrumb breadcrumb-quirk font-helvetica" style="float: left;margin-bottom: 8px;margin-top: 8px;margin-left: 17px;">
                                                <li class="whitetext">{{vm.selectedJobDetail.clientName}}</li>
                                                <li class="whitetext">{{vm.selectedJobDetail.designation}}</li>
                                                <li>
                                                    <span ng-repeat="elem in vm.selectedJobDetail.locations"><span ng-if="$index != 0">,&nbsp;</span>{{elem}}</span>
                                                </li>
                                                <li> {{vm.selectedJobDetail.minExp}}-{{vm.selectedJobDetail.maxExp}} Years </li>
                                            </ol>
                                        </div>
                                        <div class="pad10 ml10 col-md-6 width500 white-background border-grey" style="margin: 0 auto;float:none;">
                                            <form action="" class="text-center form-inline form-spacing" novalidate="novalidate">
                                                <div class="form-group form-group--spacing" ng-repeat="format in vm.trackerFormats">
                                                    <label class="col-sm-1 ckbox1 ckbox ckbox-success">
                                                        <input type="checkbox" ng-model="format.select" ng-checked="vm.selectedJobDetail.trackerFormats.indexOf(format.key) != -1"><span></span>
                                                    </label>
                                                    <div class="col-sm-10">
                                                        <input type="text" name="" class="form-control" ng-model="format.name" readonly/>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                        <div class="clear">
                                            <button class="btn btn-success pull-right" ng-click="vm.saveTracker()">Save</button>
                                        </div>
                                    </div>
                                    <div class="tab-pane notoppad noleftpadding norightpadding no-background" id="editteam">
                                        <div class="inbox-head mb15">
                                            <h3 style="float: left">Edit Team </h3>
                                            <ol class="dark breadcrumb breadcrumb-quirk font-helvetica" style="float: left;margin-bottom: 8px;margin-top: 8px;margin-left: 17px;">
                                                <li class="whitetext">{{vm.selectedJobDetail.clientName}}</li>
                                                <li class="whitetext">{{vm.selectedJobDetail.designation}}</li>
                                                <li>
                                                    <span ng-repeat="elem in vm.selectedJobDetail.locations"><span ng-if="$index != 0">,&nbsp;</span>{{elem}}</span>
                                                </li>
                                                <li> {{vm.selectedJobDetail.minExp}}-{{vm.selectedJobDetail.maxExp}} Years </li>
                                            </ol>
                                        </div>
                                        <div class="pad10 ml10 col-md-6 white-background border-grey" style="margin: 0 auto;float:none;">
                                            <select ng-change="vm.updateAllotedUser()" id="select34" class="form-control" ng-model="vm.selectedRecruiter" style="width: 100%" data-placeholder="Select user">
                                                <option ng-repeat="user in vm.userList" value="{{user.displayName}}">{{user.displayName}}</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="tab-pane notoppad noleftpadding norightpadding no-background" id="editclientinfo">
                                        <div class="inbox-head mb15">
                                            <h3 style="float: left">Edit Client Info</h3>
                                            <ol class="dark breadcrumb breadcrumb-quirk font-helvetica" style="float: left;margin-bottom: 8px;margin-top: 8px;margin-left: 17px;">
                                                <li class="whitetext">{{vm.selectedJobDetail.clientName}}</li>
                                                <li class="whitetext">{{vm.selectedJobDetail.designation}}</li>
                                                <li>
                                                    <span ng-repeat="elem in vm.selectedJobDetail.locations"><span ng-if="$index != 0">,&nbsp;</span>{{elem}}</span>
                                                </li>
                                                <li> {{vm.selectedJobDetail.minExp}}-{{vm.selectedJobDetail.maxExp}} Years </li>
                                            </ol>
                                        </div>
                                        <form action="" class="form-horizontal" novalidate="novalidate">
                                            <div class="pad10 ml10 white-background border-grey">
                                                <div class="form-group">
                                                    <div class="col-sm-12">
                                                    <input type="text" name="" ng-model="vm.clientInfo.emailId" class="form-control" placeholder="SPOC Mail ID" required />
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    <div class="col-sm-12">
                                                        <select id="select46" class="form-control" ng-model="vm.clientInfo.jobLocations" style="width: 100%" data-placeholder="Job Location" multiple>
                                                            <option ng-repeat="location in vm.clientInfo.jobLocations" value="{{location}}">{{location}}</option>
                                                        </select>
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    <div class="col-sm-12">
                                                        <select id="select47" ng-model="vm.clientInfo.clientLocations" class="form-control" style="width: 100%" data-placeholder="Address" multiple>
                                                            <option ng-repeat="location in vm.clientInfo.clientLocations" value="{{location}}">{{location}}</option>
                                                        </select>
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    <div class="col-sm-12">
                                                        <input ng-model="vm.clientInfo.clientURL" type="text" name="" class="form-control" placeholder="Clientâ€™s URL" required />
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    <div class="col-sm-12">
                                                        <textarea ng-model="vm.clientInfo.otherInfo" rows="3" class="form-control" placeholder="Other Information" required=""></textarea>
                                                    </div>
                                                </div>     

                                                <div class="modal-footer text-center">
                                                    <div class="col-md-3 no-float center-div ">
                                                        <button ng-click="vm.updateClientInfo()" type="button" class="btn btn-success btn-block btn-quirk text-center">Apply</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                        </aside>
                        </div>
                    </div>
                    <script type="text/javascript">
                    $(function() {
                        $("#btnAdd").bind("click", function() {
                            var div = $("<div />");
                            div.html(GetDynamicTextBox(""));
                            $("#TextBoxContainer").append(div);
                            $("#autocs").val('');
                        });


                        $("#btnGet").bind("click", function() {
                            var values = "";
                            $("input[name=DynamicTextBox]").each(function() {
                                values += $(this).val() + "\n";
                            });
                            alert(values);
                        });
                        $("body").on("click", ".remove", function() {
                            $(this).closest("div").remove();
                        });
                    });

                    $(function() {
                        $("#btnAdd1").bind("click", function() {
                            var div = $("<div />");
                            div.html(GetDynamicTextBox1(""));
                            $("#TextBoxContainer1").append(div);
                            $("#autocs1").val('');
                        });


                        $("#btnGet").bind("click", function() {
                            var values = "";
                            $("input[name=DynamicTextBox]").each(function() {
                                values += $(this).val() + "\n";
                            });
                            alert(values);
                        });
                        $("body").on("click", ".remove", function() {
                            $(this).closest("div").remove();
                        });
                    });

                    function GetDynamicTextBox(value) {
                        var textval = $("#autocs").val();

                        // alert("value is "+$("#select20").val());
                        return '<div style="position:relative"><input class="form-control highlighttext" disabled name = "DynamicTextBox" type="text" value = "' + $("#autocs").val() + '" />&nbsp;' +
                            '<button type="button" class="remove addbtnfloat btn btn-quirk closebtn"> X </button></div>';

                    }

                    function GetDynamicTextBox1(value) {
                        var textval = $("#autocs1").val();

                        // alert("value is "+$("#select20").val());
                        return '<div style="position:relative"><input class="form-control highlighttext" disabled name = "DynamicTextBox" type="text" value = "' + $("#autocs1").val() + '" />&nbsp;' +
                            '<button type="button" class="remove addbtnfloat btn btn-quirk closebtn"> X </button></div>';

                    }
                    </script>
                </div>
                <div class="clear"></div>
            </div>
        </div>
        <!-- modal-content -->
    </div>
    <!-- modal-dialog -->
    <script type="text/javascript">
    $(function() {
        $("#btnAdd").bind("click", function() {
            var div = $("<div />");
            div.html(GetDynamicTextBox(""));
            $("#TextBoxContainer").append(div);
            $("#autocs").val('');
        });


        $("#btnGet").bind("click", function() {
            var values = "";
            $("input[name=DynamicTextBox]").each(function() {
                values += $(this).val() + "\n";
            });
            alert(values);
        });
        $("body").on("click", ".remove", function() {
            $(this).closest("div").remove();
        });
    });

    $(function() {
        $("#btnAdd1").bind("click", function() {
            var div = $("<div />");
            div.html(GetDynamicTextBox1(""));
            $("#TextBoxContainer1").append(div);
            $("#autocs1").val('');
        });


        $("#btnGet").bind("click", function() {
            var values = "";
            $("input[name=DynamicTextBox]").each(function() {
                values += $(this).val() + "\n";
            });
            alert(values);
        });
        $("body").on("click", ".remove", function() {
            $(this).closest("div").remove();
        });
    });

    function GetDynamicTextBox(value) {
        var textval = $("#autocs").val();

        // alert("value is "+$("#select20").val());
        return '<div style="position:relative"><input class="form-control highlighttext" disabled name = "DynamicTextBox" type="text" value = "' + $("#autocs").val() + '" />&nbsp;' +
            '<button type="button" class="remove addbtnfloat btn btn-quirk closebtn"> X </button></div>';

    }

    function GetDynamicTextBox1(value) {
        var textval = $("#autocs1").val();

        // alert("value is "+$("#select20").val());
        return '<div style="position:relative"><input class="form-control highlighttext" disabled name = "DynamicTextBox" type="text" value = "' + $("#autocs1").val() + '" />&nbsp;' +
            '<button type="button" class="remove addbtnfloat btn btn-quirk closebtn"> X </button></div>';

    }
    </script>
</div>
<div class="clear"></div>
</div>
</div>
<!-- modal-content -->
</div>
<!-- modal-dialog -->
<!-- modal -->
<script>
$('.expander').click(function() {
    $('#TableData').slideToggle();
    $('#headdiv').toggle();
});

$('.expanderclient').click(function() {
    $('#TableData1').slideToggle();
    $('#headdiv1').toggle();
});

 $("#select21").select2({tags: true});
 $("#select46").select2({tags: true});
 $("#select47").select2({tags: true});
 $("#select21").select2({tags: true});
 $("#select21").select2({tags: true});
function toggleTextEdit() {

    var Disabled = document.getElementById("txtBox").disabled;
    if (Disabled == false) {
        $('#enabltEditTemplate').addClass("save-template");
        $('#enabltEditTemplate').html("<i class='fa fa-pencil-square-o' aria-hidden='true'></i>");

    } else {
        $('#enabltEditTemplate').removeClass("save-template");
        $('#enabltEditTemplate').html("<i class='fa fa-floppy-o' aria-hidden='true'></i>");
    }
    document.getElementById("txtBox").disabled = !Disabled;
}

function loadclientParent() {
    //$('#enableTxtClient').html("<i class='fa fa-pencil-square-o' aria-hidden='true'></i>");
    document.getElementById('enableTxtClient').style.display = "none";
    document.getElementById('enableEditclient').style.display = "block"
        // $('#enableTextTemplate').html("<i class='fa fa-pencil-square-o' aria-hidden='true'></i>");
    document.getElementById("txtEditClient1").disabled = true;
}

function loadpage(page_type) {

    if ('job_invite' == page_type) {
        document.getElementById('enableTextTemplate').style.display = "none";
        document.getElementById('enabltEditTemplate').style.display = "block";
        document.getElementById("txtBox").disabled = true;

    }
    if ('new_format' == page_type) {
        document.getElementById('enableTextTemplate').style.display = "block";
        document.getElementById('enabltEditTemplate').style.display = "none";
        document.getElementById("txtBox").disabled = false;

    }
}

function toggleTextClient() {
    $('#txtEditClient1').val("");

}

function toggleTextClient1() {
    $('#enableTxtClient').html("<i class='fa fa-floppy-o' aria-hidden='true'></i>");
    var Disabled = document.getElementById("txtEditClient1").disabled;
    if (Disabled == false) {
        $('#enableEditclient').addClass("save-template");
        $('#enableEditclient').html("<i class='fa fa-pencil-square-o' aria-hidden='true'></i>");
    } else {
        $('#enableEditclient').removeClass("save-template");
        $('#enableEditclient').html("<i class='fa fa-floppy-o' aria-hidden='true'></i>");
    }
    document.getElementById("txtEditClient1").disabled = !Disabled;
}
</script>
